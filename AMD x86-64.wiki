 * 본 항목은 [[64비트]], [[x64]], [[AMD64]] 로도 들어올 수 있습니다.
attachment:/288px-AMD64_Logo.svg.png?align=right
[[목차]]
== 개요 ==
[[AMD]]가 기존에 사용하던 [[IA-32]]명령어셋을 64비트에 맞게 확장한 명령어셋 . AMD64 라고도 불리며, 기존 아키텍처였던 [[x86]]과 구분하기 위해 x86-64 혹은 [[x64]]로 부르기도 한다.

== 역사 ==
인텔이 [[IA-64]]를 [[IA-32]]의 확장이 아닌 하위호환성이 없는 신규 명령어셋으로 개발하기로 1994년 결정하면서 [[IA-32]]의 64비트 확장 명령어셋 개발을 할 수 있는 기회는 x86업계의 2인자였던 [[AMD]]에게로 넘어오게 된다.
[[AMD]]는 그 기회를 놓치지 않고 1999년 x86-64라는 이름으로 64비트 확장 x86명령어셋을 발표하게 되고 2003년 개발명 슬렛지해머로 알려진 옵테론을 PC시장에 출시하고, 결국 인텔도 2004년 [[wiki:"인텔 펜티엄4 시리즈" 프레스캇]]에서 x86-64를 지원하는 방향으로 선회하면서 업계의 사실상의 표준으로 자리잡게 되었다. ~~그 와중에 [[아이태니엄]] IA-64는 침몰하게 되었고~~ 

== 특징 ==
90년대를 풍미했던 32비트 기반 주요 명령어셋들이 64비트로 확장되었을 때의 보여줬던 방식들을 무리없이 잘 따라갔다. 주요 변경점을 살펴보면,
 * 범용 레지스터 숫자가 기존 EAX,EBX,ECX,EDX,ESP,EBP,ESI,EDI의 8개에서 R8~15가 추가되면서 16개로 늘어났다[* 정확하게는 범용 레지스터 8개가 추가된 것에 가깝다. 왜냐하면 [[IA-32]]의 기존 8개 레지스터는 특수기능이 각각 할당되어 있어서 범용 레지스터로 분류하기에는 힘든 상황이었기 때문]. 이로서 x86의 고질적인 레지스터 부족이 크게 완화되었다.
 * 당연히 IP같은 프로그램 카운터를 비롯한 주요 레지스터의 크기가 32비트에서 64비트로 확장되었다.
 * SSE레지스터 숫자가 8개에서 16개로 확대되었다.
 * 기존 x87레지스터는 그대로 유지하였다. x87구조는 x86의 CISC명령어셋과 함께 x86의 성능향상에 발목을 잡는 존재였으므로 인텔과 AMD 모두 SSE명령어셋으로 대체하려는 상황이었으므로 이러한 결정은 타당하였다.
 * 가상메모리 공간은 48비트(256TB), 물리메모리 공간은 40비트(1TB)로 확장되었다[* 프로그램 카운터가 64비트임에도 불구하고 메모리공간에 제약을 두는 이유는 메모리 포인터 숫자가 클 경우 페이지 테이블의 오버헤드가 커지기 때문에 굳이 너무 값을 높게 잡을 필요가 없기 때문이다. 사실 아직까지는 메모리를 1테라까지나 갖춰야 할 필요성이 없기도 하고.].
 * 레거시 모드와 롱-모드를 제공하였다. 레거시 모드에서는 [[IA-32]]와 완전한 호환성을 유지하였으며 64비트OS에서 활성화 가능한 롱-모드에서는 [[IA-32]]의 프로텍티드 모드까지 호환성을 가지게 되었다. x86리얼모드나 가상x86모드는 포기되었다[* x86리얼모드나 가상x86모드는 32비트 OS에서 16비트 [[DOS]]시절의 어플들을 지원하기 위한 모드였고 2000년도 당시 사용하던 [[Windows 2000]] 등에서는 사실상 쓰는 어플이 없던 상황이기 때문에 굳이 지원할 필요가 없었다. 꼭 필요하다면 레거시 모드로 구동하면 되는 것이고.].
 * x86-64에서 64비트 확장 명령어들은 명령어 앞에 1바이트의 프리픽스가 붙는 것으로 구분되었다. 이 뜻은 64비트 모드에서 구동되는 어플이더라도 64비트 확장 부분의 기능을 사용하지 않으면 그대로 코드길이를 유지할 수 있다는 의미였다.
 * NX bit이 추가되었다. 이는 메모리 안정성과 보안성 향상을 위한 기능으로 특히 버퍼 오버런 공격에 대한 취약성을 개선하기 위한 것이었다.

[http://sandpile.org/ 여기에서 명령어셋트의 모습을 볼수 있다.]

== 전개 ==
x86-64가 클로우해머, 즉 애슬론64로 시장에 도입되어 인기를 끌고 인텔도 프레스캇부터 지원을 시작한 후 CPU에서는 대부분 x86-64를 지원하게 되면서 x86-64는 빠른 속도로 IA-32를 이어 시장에서 사실상의 표준의 위치를 점하게 되었다.
다만 OS와 애플리케이션은 CPU시장의 추세만큼 빠르게 64비트로 전환하지 못했는데 OS는 2004년 출시된 윈도우XP x64에디션이 별 반향 없이 넘어간 후 2006년의 [[wiki:"Windows Vista" 윈도우 비스타]]에서는 확실하게 x86-64를 지원하였으나 윈도우 비스타 자체의 실패로 64비트 PC환경의 도입은 다시 지연되었고 결국 2009년 [[wiki:"Windows 7" 윈도우7]]의 성공과 더불어 PC시장에 x86-64가 안착하게 된다. 이후 64비트 점유율 상승은 PC에 들어가는 RAM용량의 증가세에 의해 좌우될 것이다.[* [[2010년대]] 이전부터 [[wiki:"RAM/주소할당 문제" 이미 32비트 OS의 메모리 지원 용량을 초월해버렸기 때문]].]
애플리케이션의 경우 통상 64비트 컴퓨팅으로 확실한 이득을 얻을 수 있을 경우에만 64비트로 제작하는 경우가 많고 애초에 x86-64나 그것을 구동하는 64비트OS가 32비트와 64비트 양쪽에 완벽한 호환성을 제공해 주므로 OS가 완전히 64비트로 넘어가더라도 당분간 32비트 애플리케이션은 64비트 애플리케이션과 공존할 전망.
 
== 뒷이야기 ==
x86-64의 이름이 AMD64, Intel64, 얌힐, IA-32e, EM64T, x64같은 여러 이름으로 불리우게 된 이유는 x86-64를 둘러싼 [[Intel]]과 [[AMD]] 두 회사간의 알력~~이라고 쓰고 대부분은 인텔의 병크라고 읽어도 된다~~의 결과이다.

처음 AMD가 x86-64라는 이름으로 IA-32의 64비트 확장 계획을 1999년도에 발표했을 때 인텔의 공식적 입장은 IA-32는 별도의 64비트화 계획이 없고, IA-64가 인텔의 차세대 64비트라는 것이었다. 그러나 이러한 결정으로 인해 후술하듯이 인텔 내부에서 희대의 내부음모 사건이 일어나는 계기가 되었는데... 당시 프레스캇의 기초설계를 진행하고 있던 인텔 오레건 설계팀에서 x86-64를 적용한 설계를 얌힐이라는 코드명 아래 비밀리에 시작했다. 여기까지는 어느 업체에서나 볼 수 있는 그러한 비밀 프로젝트인 것처럼 보였다. 그런데 문제는 그 비밀의 범위였다. 무려'''회장님과 경영진'''에게도 비밀로 진행 했다는 것이다![* 경영진이 자사 최신 제품의 기본스펙을 모르게 개발하는 게 가능한 회사 조직이라는 것은 [[막장]] 이상도 이하도 아니다. 이는 인텔 경영층이 2000년도 즈음에 얼마나 내부적으로 병크 상태였는지 알려주는 에피소드로 인텔의 주요 병크 의사결정들이 딱 그 시기에 쏟아져 나왔다는 것이 우연의 산물이 아니라는 증거일 수 있다.]
이후 2003년에 x86-64기반의 옵테론과 애슬론64가 출시되면서 시장에서 큰 인기를 얻게 되면서 인텔의 신형 프레스캇에 x86-64가 이미 포함되었다는 루머가 꾸준히 올라오게 된다. 이것이 이른바 '''얌힐'''의혹으로 당시 내노라 하는 벤치마크 사이트들이 얌힐의 다이 사진까지 분석해가면서 관련 의혹을 제기하게 되며 인텔은 이를 꾸준히 부인하였다.
그리고 2004년 드디어 [[wiki:"인텔 펜티엄4 시리즈" 프레스캇]]이 시장에 데뷔하면서 기존에 얌힐로 알려져 있던 인텔판 x86-64를 대외적으로 발표하게 되는데... 이것을 x86-64가 아닌 IA-32e라는 이름으로 발표하는 병크를 다시한 번 저지르게 된다. 인텔의 작명 의도는 x86-64가 단순히 IA-32를 약간 확장한 것에 불과하니까 IA-32e일 뿐이라는 것이었으나. 문제는 이렇게 발표해 놓고 보니 프레스캇이 64비트를 지원한다는 사실이 가려져 버리면서 가뜩이나 문제가 많은 프레스캇의 제품 경쟁력을 스스로 디스해버리는 사태가 벌어지고 만 것.
결국 인텔은 새로운 작명을 하게 되는데 이번에는 또다시 괴악하기 짝이 없는  Extended Memory 64bit Tech 줄여서 EM64T라는 이름을 붙여 버렸다. 즉 자사 제품이 단순하게 64비트 '''메모리''' 확장 기능만 가지고 있는 것으로 격하시켜 버린 것. 이러한 일련의 작명 병크들의 배경에는 인텔이 64비트 명령어셋의 적자는 여전히 [[IA-64]]임을 지키려는 의도가 숨어 있었으나, 결국 인텔이 IA-64 기반으로 만든 [[아이태니엄 시리즈]]가 [[흑역사]]가 되면서 이러한 시도는 희극이자 비극으로 막을 내리게 된다.
한가지 더, AMD 역시 x86-64가 시장에서 물이 오르는 시점에서 그동안의 중립적인 명칭이었던 x86-64를 AMD64라는 이름으로 말뚝박기를 시전하면서 약간의 병크를 저지르지만[* 사실 이것은 그다지 병크라고 할 수준은 아니다. 어차피 x86-64의 소유권은 명확히 AMD의 것이기 때문.] 그것에 대한 인텔의 대응은...   AMD가 원 저작자임이 분명한 x86-64를 무려 Intel64라는 이름으로 바꾼 것이었다.[* 재밌는 부분은 Intel64도 윈도우를 포함한 64비트 기반 프로그램에서는 프로세서 아키텍쳐를 '''AMD64로 인식한다.''']   [[고만해, 미친놈들아!]]

결국 이러한 명칭싸움의 부작용으로 인해 x86-64를 인텔이 개발한 명령어셋으로 오해하는 경우조차도 발생하고 있다.[* 일부 PC정비사 서적에서 인텔 EM64T(이하 Intel64)를 '''인텔에서 개발한 64비트 아키텍쳐'''라고 설명한 부분이 있는데, 이는 모르는 사람이 볼 때 "인텔에서 독자적으로 개발한 기술"로 오해를 할 수 있다.(설명한 내용도 그런식으로 되어있었다.) 그런데 EM64T는 위에 서술된것과 같이 AMD의 x86-64를 크로스라이센스를 통해 도입한 명령어셋이다. 추가로 이 서적들의 Intel64 설명 부분에 AMD 및 크로스라이센스 관련 내용은 '''일절 없었다.'''] 
